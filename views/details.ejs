<%- include('partials/header', {head:'', title: site.title}); -%>
<script src="../scripts/script.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>
<body>
    <main>
        <div class="screen-size">
            <svg width="134" height="98" viewBox="0 0 134 98" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="1.5" y="1.5" width="131" height="95" rx="3.5" stroke="#0275FF" stroke-width="3"/>
                <path d="M48.5 74C48.5 74.8284 49.1716 75.5 50 75.5H63.5C64.3284 75.5 65 74.8284 65 74C65 73.1716 64.3284 72.5 63.5 72.5H51.5V60.5C51.5 59.6716 50.8284 59 50 59C49.1716 59 48.5 59.6716 48.5 60.5V74ZM85.5 40C85.5 39.1716 84.8284 38.5 84 38.5H70.5C69.6716 38.5 69 39.1716 69 40C69 40.8284 69.6716 41.5 70.5 41.5H82.5V53.5C82.5 54.3284 83.1716 55 84 55C84.8284 55 85.5 54.3284 85.5 53.5V40ZM51.0607 75.0607L85.0607 41.0607L82.9393 38.9393L48.9393 72.9393L51.0607 75.0607Z" fill="#0275FF"/>
                <path d="M2.5 17.5H131.5" stroke="#0275FF" stroke-width="3"/>
            </svg>
            <h3>Je scherm is te klein</h3>
            <p>AccessDash vereist een minimale schermbreedte van 900px</p>      
        </div>
        <div class="carousel-container">
                <% scans.forEach((scan, index) => { %>
                    <div class="carousel-item <% if (index === scans.length - 1) { %>active<% } %>">
                        <section id="information">
                            <div>
                                <h3><%- scan.title %></h3>
                                <h1><%- site.title %></h1>
                            </div>
                            <div class="carousel-buttons">
                                <button class="carousel-btn prev" aria-label="Previous scan">
                                    <svg viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5 2L2.44163 4.46362C1.6456 5.23016 1.62213 6.49702 2.38922 7.29253L5 10" stroke="#5D666A" stroke-width="3" stroke-linecap="round"/>
                                    </svg>
                                </button>
                                <date class="carousel-btn"><%= scan.date %></date>
                                <button class="carousel-btn next" aria-label="Next scan">
                                    <svg viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M2 10L4.55837 7.53638C5.3544 6.76984 5.37787 5.50298 4.61078 4.70747L2 2" stroke="#5D666A" stroke-width="3" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                        </section>
                        <div class="grid-container">
                            <section id="score">
                                <h2><%= scan.title %></h2>
                                <div class="scan-content">
                                    <div class="scan-description">
                                      <p style="white-space: pre-wrap;"><%= scan.description %></p>
                                    </div>
                                    <div id="scan-result-chart-<%= index %>" class="scan-result-chart"></div>
                                </div>
                                <table id="scan-table-<%= index %>">
                                    <tr>
                                      <th><%= scan.title %></th>
                                    </tr>
                                    <tr>
                                      <td><%= scan.score %></td>
                                    </tr>
                                </table>
                            </section>
                            <section id="foutmeldingen">
                                <h2>Soorten foutmeldingen</h2>
                                <div id="error-chart-<%= index %>" class="error-chart"></div>
                                <table id="error-table-<%= index %>">
                                  <tr>
                                    <% scan.result.forEach(item => { %>
                                      <th><%= item.title %></th>
                                    <% }); %>
                                  </tr>
                                  <tr>
                                    <% scan.result.forEach(item => { %>
                                      <td><%= item.amount %></td>
                                    <% }); %>
                                  </tr>
                                </table>
                            </section>
                            <section id="toegankelijkheid">
                                <h2>Toegankelijkheid</h2>
                                <div id="toegankelijkheids-chart-<%= index %>" class="toegankelijkheids-chart"></div>
                                <table id="toegankelijkheids-table-<%= index %>">
                                    <tr>
                                        <% scans.forEach(item => { %>
                                            <th><%= item.date %></th>
                                        <% }); %>
                                    </tr>
                                    <tr>
                                        <% scans.forEach(item => { %>
                                            <td class="<%= item.date === scan.date ? 'currentScan' : '' %>"><%= item.score %></td>
                                        <% }); %>
                                    </tr>
                                </table>
                            </section>
                            <section id="sidebar">
                                <article>
                                    <p><%= scan.result[0].title %></p>                                     
                                    <div class="scan-results">
                                        <p class="scan-score"><%= scan.result[0].amount %></p>
                                        <picture>
                                            <img src="../images/total-icon.svg" alt="Totale fouten icon">
                                        </picture>
                                    </div>
                                </article>
                                <article>
                                    <p><%= scan.result[1].title %></p>
                                    <div class="scan-results">
                                        <p class="scan-score"><%= scan.result[1].amount %></p>
                                        <picture>
                                            <img src="../images/contrast-icon.svg" alt="Contrast icon">
                                        </picture>
                                    </div>
                                </article>
                                <article>
                                    <p><%= scan.result[2].title %></p>
                                    <div class="scan-results">
                                        <p class="scan-score"><%= scan.result[2].amount %></p>
                                        <picture>
                                            <img src="../images/structureel-icon.svg" alt="Structureel icon">
                                        </picture>
                                    </div>
                                </article>
                                <article>
                                    <p><%= scan.result[3].title %></p>                                     
                                    <div class="scan-results">
                                        <p class="scan-score"><%= scan.result[3].amount %></p>
                                        <picture>
                                            <img src="../images/alt-teksten-icon.svg" alt="Alt teksten icon">
                                        </picture>
                                    </div>
                                </article>
                                <article>
                                    <p><%= scan.result[4].title %></p>     
                                    <div class="scan-results">
                                        <p class="scan-score"><%= scan.result[4].amount %></p>
                                        <picture>
                                            <img src="../images/aria-labels-icon.svg" alt="Aria labels icon">
                                        </picture>
                                    </div>
                                </article>
                            </section>
                        </div>
                    </div>
                <% }) %>
    </main>
    <script>
        // Pass the scan data from EJS to JavaScript
        const scans = <%- JSON.stringify(scans) %>;
    </script>
    <script src="../scripts/score-chart.js" defer></script>
    <noscript>
        <style>
        .scan-result-chart, .error-chart, .toegankelijkheids-chart {
            display: none;
        }
        </style>
  </noscript>
</body>
</html>